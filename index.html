<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 ç‹ç‹ç‹æ—¥æœ¬è¡Œ</title>
    <style>
        :root { --primary: #76c7ff; --secondary: #ffcb05; --bg: #fdfdff; }
        body { font-family: "PingFang TC", sans-serif; background: #f0f8ff; margin: 0; display: flex; justify-content: center; }
        .app-container { width: 100%; max-width: 500px; background: white; min-height: 100vh; position: relative; }
        
        /* ç™»å…¥é®ç½© */
        #login-overlay { 
            position: fixed; inset: 0; background: #fff; z-index: 9999; 
            display: none; flex-direction: column; align-items: center; justify-content: center; 
        }
        
        header { display: flex; justify-content: space-between; align-items: center; padding: 25px 20px; background: white; border-bottom: 1px solid #f9f9f9; position: relative; }
        .logo { font-size: 20px; font-weight: bold; }
        
        /* é¸å–®å®¹å™¨ */
        .menu-wrapper { position: relative; z-index: 1000; }
        .menu-icon { 
            width: 40px; height: 40px; background: #fff; border-radius: 50%; 
            box-shadow: 0 3px 8px rgba(0,0,0,0.1); display: flex; align-items: center; 
            justify-content: center; cursor: pointer; border: 1px solid #f0f0f0;
        }
        .menu-icon svg { pointer-events: none; } /* é˜²æ­¢é»æ“Šåˆ° SVG æœ¬é«” */

        /* ä¸‹æ‹‰é¸å–®æ¨£å¼ */
        .menu-dropdown { 
            display: none; position: absolute; top: 55px; right: 0; 
            background: white; box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
            border-radius: 15px; min-width: 160px; border: 1px solid #f0faff; overflow: hidden; 
        }
        .menu-dropdown.show { display: block; animation: popIn 0.2s ease; }
        .menu-item { padding: 15px 18px; border-bottom: 1px solid #f9f9f9; font-size: 15px; cursor: pointer; text-decoration: none; color: #444; display: block; }
        .menu-item:hover { background: #f0faff; }

        .content { padding: 0 20px 50px; }
        h3 { color: #bbb; font-size: 14px; margin: 25px 0 10px; }
        
        .cat-group { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .selection-btn { background: #fff; border: 2px solid #f4f8fb; padding: 15px 5px; border-radius: 20px; text-align: center; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .selection-btn.active { border-color: var(--primary); background: #f0faff; color: var(--primary); font-weight: bold; }
        
        .user-group { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
        .user-btn { background: #fff; border: 2px solid #f0f0f0; padding: 12px 0; border-radius: 50px; font-size: 13px; text-align: center; cursor: pointer; }
        .user-btn.active { border-color: var(--secondary); background: #fffdeb; color: #b48a00; font-weight: bold; }
        
        .input-box { width: 100%; padding: 16px; margin-bottom: 12px; border: 2px solid #f0f4f8; border-radius: 20px; box-sizing: border-box; font-size: 16px; text-align: center; outline: none; background: #fafcfe; }
        .submit-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #76c7ff, #5da9e9); color: white; border: none; border-radius: 30px; font-size: 18px; font-weight: bold; cursor: pointer; }
        
        @keyframes popIn { from { opacity:0; transform: translateY(-10px); } to { opacity:1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="login-overlay">
    <div style="font-size: 50px;">âœˆï¸</div>
    <h2 style="margin: 20px 0;">âœ¨ 2026 ç‹ç‹ç‹æ—¥æœ¬è¡Œ âœ¨</h2>
    <input type="password" id="passInput" class="input-box" style="width: 80%" placeholder="è¼¸å…¥å¯†ç¢¼ (1234)">
    <button class="submit-btn" style="width: 80%" onclick="handleLogin()">å‡ºç™¼Go âœˆï¸</button>
</div>

<div class="app-container">
    <header>
        <div class="logo">2026 ç‹ç‹ç‹æ—¥æœ¬è¡Œ</div>
        <div class="menu-wrapper">
            <div class="menu-icon" id="menuToggle">
                <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#aaa" d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/></svg>
            </div>
            <div id="menu" class="menu-dropdown">
                <a href="schedule.html" class="menu-item">ğŸ“… æ¯æ—¥è¡Œç¨‹</a>
                <a href="summary.html" class="menu-item">ğŸ“Š è¨˜å¸³ç¸½è¦½</a>
                <a href="game.html" class="menu-item">ğŸ® æŒ‘æˆ°å°éŠæˆ²</a>
            </div>
        </div>
    </header>

    <div class="content">
        <h3>âœ¦ 1. é¸æ“‡åˆ†é¡ âœ¦</h3>
        <div class="cat-group">
            <div class="selection-btn active" onclick="selectCat(this, 'é£Ÿ')">ğŸ± é£Ÿ</div>
            <div class="selection-btn" onclick="selectCat(this, 'è¡Œ')">ğŸšƒ è¡Œ</div>
            <div class="selection-btn" onclick="selectCat(this, 'è³¼ç‰©')">ğŸ›ï¸ è³¼ç‰©</div>
            <div class="selection-btn" onclick="selectCat(this, 'æ™¯é»')">ğŸ—¼ æ™¯é»</div>
            <div class="selection-btn" onclick="selectCat(this, 'é›œ')">ğŸˆ é›œ</div>
            <div class="selection-btn" onclick="selectCat(this, 'ä½')">ğŸ¨ ä½</div>
        </div>
        <h3>âœ¦ 2. è¼¸å…¥æ˜ç´° âœ¦</h3>
        <input type="number" id="amount" class="input-box" placeholder="æ—¥å¹£é‡‘é¡ (JPY)" inputmode="numeric">
        <input type="text" id="item" class="input-box" placeholder="å“å (ä¾‹ï¼šæ‹‰éºµ)">
        <h3>âœ¦ 3. èª°å‡ºçš„éŒ¢ âœ¦</h3>
        <div class="user-group">
            <div class="user-btn active" onclick="selectUser(this, 'èˆª')">èˆª</div>
            <div class="user-btn" onclick="selectUser(this, 'å®‰')">å®‰</div>
            <div class="user-btn" onclick="selectUser(this, 'é¦™')">é¦™</div>
            <div class="user-btn" onclick="selectUser(this, 'ç‘©')">ç‘©</div>
            <div class="user-btn" onclick="selectUser(this, 'å»·')">å»·</div>
        </div>
        <button id="send-btn" class="submit-btn" style="margin-top: 30px;" onclick="submitData()">å®Œæˆä¸¦å­˜æª” âœ¨</button>
        <p id="status" style="text-align: center; margin-top: 15px; font-weight: bold;"></p>
    </div>
</div>

<script>
    // 1. ç«‹å³åŸ·è¡Œï¼šç™»å…¥æª¢æŸ¥
    (function() {
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const overlay = document.getElementById('login-overlay');
        if (isLoggedIn === 'true') {
            overlay.style.display = 'none';
        } else {
            overlay.style.display = 'flex';
        }
    })();

    const GAS_URL = "https://script.google.com/macros/s/AKfycbxktADedYUP_K5X8S0aJ-f0XKGjev2qOuNZi1LNN7E5vq1b26KA-71Oc1IZnR1drgYfdg/exec"; 
    let currentCat = "é£Ÿ", currentUser = "èˆª";

    // 2. ç™»å…¥å‡½å¼
    function handleLogin() {
        const pass = document.getElementById('passInput').value;
        if(pass === '1234') {
            localStorage.setItem('isLoggedIn', 'true');
            document.getElementById('login-overlay').style.display = 'none';
        } else {
            alert('å¯†ç¢¼éŒ¯èª¤ï¼');
        }
    }

    // 3. é¸å–®é–‹é—œä¿®å¾© (æ ¸å¿ƒä¿®æ”¹è™•)
    window.addEventListener('DOMContentLoaded', () => {
        const menuToggle = document.getElementById('menuToggle');
        const menu = document.getElementById('menu');

        if(menuToggle && menu) {
            menuToggle.onclick = function(e) {
                e.stopPropagation();
                menu.classList.toggle('show');
            };
        }

        document.onclick = function(e) {
            if(menu && menu.classList.contains('show')) {
                menu.classList.remove('show');
            }
        };
    });

    // 4. è¨ˆå¸³åŠŸèƒ½
