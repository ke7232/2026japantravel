<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬è¡Œè¨ˆå¸³</title>
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h2 { text-align: center; color: #333; margin-bottom: 20px; }
        
        /* åˆ†é¡æŒ‰éˆ•æ¨£å¼ */
        .category-group { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin-bottom: 20px; }
        .cat-btn { border: 2px solid #eee; background: white; padding: 10px 5px; border-radius: 8px; cursor: pointer; font-size: 14px; text-align: center; transition: 0.3s; }
        .cat-btn.active { border-color: #007bff; background-color: #e7f3ff; color: #007bff; font-weight: bold; }

        input { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .submit-btn { width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .submit-btn:disabled { background-color: #ccc; }
        #status { text-align: center; margin-top: 15px; font-weight: bold; }
        
        #main-content, #login-form { display: none; }
        #login-form.active, #main-content.active { display: block; }
    </style>
</head>
<body>

<div class="card">
    <div id="login-form" class="active">
        <h2>ğŸ‡¯ğŸ‡µ å®¶æ—è¨ˆå¸³ç™»å…¥</h2>
        <input type="password" id="password" placeholder="è¼¸å…¥å¯†ç¢¼ (1234)">
        <button class="submit-btn" onclick="checkPassword()">é€²å…¥ç³»çµ±</button>
    </div>

    <div id="main-content">
        <h2>æ–°å¢æ—¥å¹£é–‹éŠ·</h2>
        
        <p style="margin-bottom: 8px; font-size: 14px; color: #666;">1. é¸æ“‡åˆ†é¡</p>
        <div class="category-group">
            <div class="cat-btn active" onclick="selectCat(this, 'é£Ÿ')">é£Ÿ</div>
            <div class="cat-btn" onclick="selectCat(this, 'è¡Œ')">è¡Œ</div>
            <div class="cat-btn" onclick="selectCat(this, 'è³¼ç‰©')">è³¼ç‰©</div>
            <div class="cat-btn" onclick="selectCat(this, 'æ™¯é»')">æ™¯é»</div>
            <div class="cat-btn" onclick="selectCat(this, 'é›œ')">é›œ</div>
        </div>

        <p style="margin-bottom: 8px; font-size: 14px; color: #666;">2. è¼¸å…¥è³‡è¨Š</p>
        <input type="number" id="amount" placeholder="æ—¥å¹£ç¸½é¡ (ä¾‹ï¼š1500)" inputmode="numeric">
        <input type="text" id="item" placeholder="å“å (ä¾‹ï¼šä¸€è˜­æ‹‰éºµ)">
        <input type="text" id="user" placeholder="èª°ä»˜çš„éŒ¢ï¼Ÿ">
        
        <button id="submit-btn" class="submit-btn" onclick="sendData()">é€å‡ºç´€éŒ„</button>
        <p id="status"></p>
    </div>
</div>

<script>
    const GAS_URL = "ä½ çš„_GAS_ç¶²å€_è²¼åœ¨é€™è£¡"; 
    let selectedCategory = "é£Ÿ"; // é è¨­åˆ†é¡

    function checkPassword() {
        if (document.getElementById('password').value === '1234') {
            document.getElementById('login-form').classList.remove('active');
            document.getElementById('main-content').classList.add('active');
        } else {
            alert('å¯†ç¢¼éŒ¯èª¤');
        }
    }

    function selectCat(btn, cat) {
        // åˆ‡æ›æŒ‰éˆ•é«˜äº®
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        selectedCategory = cat;
    }

    function sendData() {
        const btn = document.getElementById('submit-btn');
        const status = document.getElementById('status');
        const amount = document.getElementById('amount').value;
        const item = document.getElementById('item').value;
        const user = document.getElementById('user').value;

        if (!amount || !item) {
            alert("è«‹å¡«å¯«é‡‘é¡èˆ‡å“å");
            return;
        }

        btn.disabled = true;
        status.innerText = "æ­£åœ¨å„²å­˜...";
        status.style.color = "#666";

        const data = {
            category: selectedCategory,
            amount: amount,
            item: item,
            user: user
        };

        fetch(GAS_URL, {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify(data)
        })
        .then(() => {
            status.innerText = "âœ… æˆåŠŸå­˜å…¥ Google Sheetsï¼";
            status.style.color = "green";
            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('amount').value = "";
            document.getElementById('item').value = "";
            btn.disabled = false;
        })
        .catch(err => {
            status.innerText = "âŒ ç™¼ç”ŸéŒ¯èª¤";
            status.style.color = "red";
            btn.disabled = false;
        });
    }
</script>

</body>
</html>
