<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶æ—æ—¥æœ¬è¡Œè¨ˆå¸³</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; display: flex; justify-content: center; padding-top: 50px; background-color: #f0f2f5; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 350px; }
        h2 { text-align: center; color: #333; }
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        button { background-color: #007bff; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #0056b3; }
        #main-content { display: none; }
        #status { text-align: center; font-size: 14px; color: #666; }
    </style>
</head>
<body>

<div class="card">
    <div id="login-form">
        <h2>ğŸ‡¯ğŸ‡µ å®¶æ—è¨ˆå¸³ç™»å…¥</h2>
        <input type="password" id="password" placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
        <button onclick="checkPassword()">é€²å…¥ç³»çµ±</button>
        <p id="error-msg" style="color:red; text-align:center;"></p>
    </div>

    <div id="main-content">
        <h2>æ–°å¢æ—¥å¹£é–‹éŠ·</h2>
        <input type="text" id="item" placeholder="å“å (ä¾‹ï¼šä¸€è˜­æ‹‰éºµ)">
        <input type="number" id="amount" placeholder="æ—¥å¹£é‡‘é¡ (JPY)">
        <select id="category">
            <option value="é£Ÿ">ğŸ• é£²é£Ÿ</option>
            <option value="è¡Œ">ğŸšƒ äº¤é€š</option>
            <option value="ä½">ğŸ¨ ä½å®¿</option>
            <option value="æ¨‚">ğŸ¡ éŠæ¨‚</option>
            <option value="è³¼">ğŸ›ï¸ è³¼ç‰©</option>
        </select>
        <input type="text" id="user" placeholder="èª°ä»˜çš„éŒ¢ï¼Ÿ">
        <button id="submit-btn" onclick="sendData()">é€å‡ºç´€éŒ„</button>
        <p id="status"></p>
    </div>
</div>

<script>
    const GAS_URL = "https://script.google.com/macros/s/AKfycbxktADedYUP_K5X8S0aJ-f0XKGjev2qOuNZi1LNN7E5vq1b26KA-71Oc1IZnR1drgYfdg/exec";

    function checkPassword() {
        const pass = document.getElementById('password').value;
        // é€™è£¡è¨­å®šä½ çš„å®¶æ—å¯†ç¢¼ï¼Œä¾‹å¦‚ï¼šjapan2026
        if (pass === '1234') { 
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        } else {
            document.getElementById('error-msg').innerText = 'å¯†ç¢¼éŒ¯èª¤ï¼';
        }
    }

    function sendData() {
        const btn = document.getElementById('submit-btn');
        const status = document.getElementById('status');
        
        const item = document.getElementById('item').value;
        const amount = document.getElementById('amount').value;
        const category = document.getElementById('category').value;
        const user = document.getElementById('user').value;

        if (!item || !amount) {
            alert("è«‹å¡«å¯«å“åèˆ‡é‡‘é¡");
            return;
        }

        btn.disabled = true;
        status.innerText = "æ­£åœ¨å‚³é€åˆ° Google Sheets...";

        const data = {
            item: item,
            amount: amount,
            category: category,
            user: user
        };

        // ä½¿ç”¨ fetch ç™¼é€è³‡æ–™
        fetch(GAS_URL, {
            method: "POST",
            mode: "no-cors", // é‡è¦ï¼šGAS è·¨ç¶²åŸŸé€šå¸¸éœ€è¦ no-cors
            body: JSON.stringify(data),
            headers: { "Content-Type": "text/plain" }
        })
        .then(() => {
            status.style.color = "green";
            status.innerText = "âœ… æˆåŠŸå­˜å…¥ Google Sheetsï¼";
            document.getElementById('item').value = "";
            document.getElementById('amount').value = "";
            btn.disabled = false;
        })
        .catch(err => {
            status.style.color = "red";
            status.innerText = "âŒ ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦";
            btn.disabled = false;
            console.error(err);
        });
    }
</script>

</body>
</html>
